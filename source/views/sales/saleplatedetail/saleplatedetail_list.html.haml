---
layout: "page"
---

- page "直接销售", "saleplatedetail"

-#大纲部分 | 商品服务分类
- content_for :toolbar do
  %button.btn.btn-circle.red-sunglo.btn-sm{:href => "javascript:;", 'ng': {'click':'removes()', 'disabled': 'isRemoves'} }
    %i.fa.fa-remove
    删除

- content_for :theader do
  - @page.listFields.each do |field|
    %th #{field.aliasName || field.fieldName}

- content_for :tbody do
  - @page.listFields.each do |column|
    %td
      = bind @page_id, (column.fieldKey || @fields[column.fieldName] || 'error')

#operate_msg_box

-#商品服务分类
= partial 'views/commons/vip/sale_vipheader'

.row
  .col-md-3
    .tabbable-line
      %ul#tabtag.nav.nav-tabs
        %li.active
          %a{"data-toggle" => "tab", :href => "//#product_type"}
            商品/服务分类
        %li
          %a{"data-toggle" => "tab", :href => "//#part_list"}
            商品
            %label{"ng-show" => "!!producttype.cateName"}
              [ {{ producttype.cateName }} ]
            %span.badge.badge-danger {{ products.length }}

      .tab-content
        #product_type.tab-pane.active
          - modal "商品&服务", "producttype"

          = partial 'views/commons/tree/panel_tree', :locals => {:sidename => "商品&服务", :sidefieldname=> 'name'}

        #part_list.tab-pane
          .portlet
            .portlet-body
              .portlet-input.input-inline
                .input-icon.right
                  %i.icon-magnifier
                  %input.form-control.input-circle{:id => 'productsearch',:name=> 'productsearch', "ng" => {"model": "productsearch"}, :type=>"text", :size =>'60' ,:placeholder=>"search..."}

            .portlet-body.portlet-empty
              %p
              %a.thumbnail{ "ng-repeat" => "product in products | filter: productsearch", "ng-click" => "addProcut(product)"}
                .caption
                  %b {{ product.itemName }}
                  %br
                  价格:
                  %label.label.label-danger.label-sm {{ product.sellPrice }} 元
                  ,
                  规格: {{ product.itemStandard }}
                  ,
                  库存
                  %label.label.label-success.label-sm 110支
                  , 单位: {{ product.itemBulk }}, {{ product.dealerName }}
                  %br
                  {{ product.itemCode }}
  .col-md-9
    .portlet
      .portlet-title
        .caption
          总项数:
          %label.label.label-success{:style => "padding-right: 10px;padding-left: 10px"}
            {{ saleplate.totalNum }}
          , 总金额:
          %label.label.label-danger{:style => "padding-right: 10px;padding-left: 10px"}
            {{ saleplate.totalCost }} 元
        .actions
          %button.btn.btn-success{:type => "button", "ng-click" => "settlement()"}
            %i.fa.fa-remove
            结算

      .portlet-body.portlet-empty
        -#表格
        - modal "直接销售", "saleplatedetail"
        = partial :'layouts/table/table'

/ 编辑界面
= partial :'layouts/partials/modal-lg' do
  = partial 'modify'

/ 选择会员
- portal "选择会员", "vip"

= partial :'views/commons/vip/portal_vip' do
  = partial :'layouts/buttons/insert', :locals => {:click => 'productportal.insert()'}
  = partial :'layouts/buttons/removes', :locals => {:click => 'productportal.removes()', 'disabled': 'isRemoves'}
